/************************************************************************************
 *
 *								[Soft Timer - TqK]
 *
 ************************************************************************************/

/*[PRIVATE INCLUDE] --------------------------------------------------------
 _________________________________________________________________________*/

#include "SoftTimer.h"


/*[PRIVATE DEFINE] ---------------------------------------------------------
 _________________________________________________________________________*/



/*[PRIVATE DECLARE] --------------------------------------------------------
 _________________________________________________________________________*/


/*
 * [SUBROUTINES] ----------------------------------------------------------
 _________________________________________________________________________*/

int SoftTimer_init()
{
	SysTick_init(16000-1);
	SysTick_enable();

	return 0;
}

int SoftTimer(SoftTimer_typedef *TIM, unsigned short __TIMEVALUE)
{
	char _flag = 0;
	TIM->currentSTT = __flagSysTick;

	if(TIM->lastSTT != TIM->currentSTT)
	{
		TIM->lastSTT = TIM->currentSTT;

		if((TIM->cnt++) >= __TIMEVALUE)
		{
			TIM->cnt = 0;
			 _flag = 1;
		}
	}

	return _flag;
}
